@use 'sass:map';

@function define-typography-level(
  $font-size,
  $line-height,
  $font-weight: 400,
  $font-family: null,
  $letter-spacing: normal
) {
  @return (
    font-family: $font-family,
    font-weight: $font-weight,
    font-size: $font-size,
    line-height: $line-height,
    letter-spacing: $letter-spacing
  );
}

@function define-typography-config(
  $font-family: null,
  $headline-1: null,
  $headline-2: null,
  $headline-3: null,
  $headline-4: null,
  $headline-5: null,
  $headline-6: null,
  $subtitle-1: null,
  $subtitle-2: null,
  $body-1: null,
  $body-2: null,
  $caption: null,
  $button: null,
  $overline: null
) {
  $font-family: $font-family or 'Rubik', 'Helvetica Neue', sans-serif;

  $config: (
    headline-1: $headline-1 or define-typography-level(112px, 112px, 300, $letter-spacing: -0.05em),
    headline-2: $headline-2 or define-typography-level(56px, 56px, 400, $letter-spacing: -0.02em),
    headline-3: $headline-3 or define-typography-level(45px, 48px, 400, $letter-spacing: -0.005em),
    headline-4: $headline-4 or define-typography-level(34px, 40px, 400),
    headline-5: $headline-5 or define-typography-level(24px, 32px, 400),
    headline-6: $headline-6 or define-typography-level(20px, 32px, 500),
    subtitle-1: $subtitle-1 or define-typography-level(15px, 24px, 400),
    subtitle-2: $subtitle-2 or define-typography-level(16px, 28px, 400),
    body-1: $body-1 or define-typography-level(14px, 20px, 400),
    body-2: $body-2 or define-typography-level(14px, 24px, 500),
    caption: $caption or define-typography-level(12px, 20px, 400),
    button: $button or define-typography-level(14px, 14px, 500) // TODO: overline
  );

  @each $key, $level in $config {
    @if map.get($level, font-family) == null {
      $new-level: map.merge(
        $level,
        (
          font-family: $font-family
        )
      );
      $config: map.merge(
        $config,
        (
          $key: $new-level
        )
      );
    }
  }

  @return map.merge(
    $config,
    (
      font-family: $font-family
    )
  );
}

@function font-family($theme, $typography) {
  $typo: map.get($theme, typography);
  $group: map.get($typo, $typography);
  @return map.get($group, font-family);
}

@function font-size($theme, $typography) {
  $typo: map.get($theme, typography);
  $group: map.get($typo, $typography);
  @return map.get($group, font-size);
}

@function font-weight($theme, $typography) {
  $typo: map.get($theme, typography);
  $group: map.get($typo, $typography);
  @return map.get($group, font-weight);
}

@function line-height($theme, $typography) {
  $typo: map.get($theme, typography);
  $group: map.get($typo, $typography);
  @return map.get($group, line-height);
}

@function letter-spacing($theme, $typography) {
  $typo: map.get($theme, typography);
  $group: map.get($typo, $typography);
  @return map.get($group, letter-spacing);
}

@mixin typography-level($theme, $typography) {
  font-family: font-family($theme, $typography);
  font-size: font-size($theme, $typography);
  font-weight: font-weight($theme, $typography);
  line-height: line-height($theme, $typography);
  letter-spacing: letter-spacing($theme, $typography);
}

@mixin typography-hierarchy($theme) {
  body {
    @include typography-level($theme, body-1);
  }

  // TODO: finish this
}
